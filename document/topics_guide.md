# Руководство по настройке базовых тем (default_topics.txt)

## Описание
Файл `document/default_topics.txt` содержит 6 базовых тем, которые показываются всем пользователям в дополнение к их персональным темам.

## Назначение
- Предоставляет готовые темы для новых пользователей
- Обеспечивает единообразие в начальном опыте
- Служит основой для изучения языка
- Покрывает основные сценарии общения

## Формат файла

### Структура блока темы
```
Название темы
Описание темы.

Следующая тема
Описание следующей темы.

И так далее...
```

### Правила форматирования
1. **Каждая тема состоит из двух частей:**
   - Название темы (первая строка)
   - Описание темы (вторая строка)

2. **Разделители:**
   - Название и описание разделяются одной пустой строкой
   - Между темами должны быть две пустые строки

3. **Количество тем:**
   - Должно быть ровно 6 тем
   - Система берет только первые 6 блоков

## Правила заполнения

### Название темы
- Краткое и понятное название (1-3 слова)
- На английском языке
- Отражает суть темы
- Примеры: "Daily Communication", "Travel and Trips"

### Описание темы
- Краткое описание (1-2 предложения)
- На английском языке
- Объясняет, что включает тема
- Указывает уровень сложности или контекст
- Примеры: "Introductions, small talk, hobbies — an easy start for any level."

## Пример корректного формата

```
Daily Communication
Introductions, small talk, hobbies — an easy start for any level.

Study and Campus
Seminars, deadlines, communication with teachers — typical student situations.

Travel and Trips
Airport, hotel, cafe — confidently solve issues on the road.

Online Communication
Chats, calls, polite requests and message reactions.

Internships, Work Abroad
Resume, interview, embassy interview — speaking clearly and to the point.

Friends and Leisure
Movies, music, sports, meetings — what people talk about every day.
```

## Логика работы системы

### Загрузка тем
1. Система читает файл `default_topics.txt`
2. Парсит содержимое по блокам (разделитель - две пустые строки)
3. Берет только первые 6 блоков
4. Каждый блок разделяет на название и описание

### Обработка блоков
```python
# Псевдокод обработки
for block in blocks[:6]:  # Только первые 6 тем
    lines = block.strip().split("\n", 1)
    if len(lines) == 2:
        # Есть название и описание
        title = lines[0].strip()
        description = lines[1].strip()
    elif len(lines) == 1:
        # Только название, описание пустое
        title = lines[0].strip()
        description = ""
```

### Генерация ID
1. Система получает ID всех пользовательских тем
2. Находит пропуски в последовательности ID
3. Заполняет пропуски ID базовых тем
4. Если пропусков нет - генерирует новые ID после максимального

### Структура в коде
Каждая базовая тема получает структуру:
```json
{
  "id": 3,  // Уникальный ID (заполняет пропуски)
  "title": "Daily Communication",
  "description": "Introductions, small talk, hobbies — an easy start for any level.",
  "base": true  // Автоматически добавляется
}
```

## Рекомендации по содержанию

### Категории тем
1. **Повседневное общение** - базовые разговоры
2. **Учеба и работа** - академические и профессиональные ситуации
3. **Путешествия** - туристические сценарии
4. **Онлайн общение** - цифровые коммуникации
5. **Карьера** - профессиональное развитие
6. **Досуг** - развлекательные темы

### Принципы написания
- **Простота** - темы должны быть понятны начинающим
- **Практичность** - реальные жизненные ситуации
- **Разнообразие** - разные контексты общения
- **Прогрессия** - от простого к сложному

## Обработка ошибок

### Если файл не найден
- Система возвращает пустой список базовых тем
- Пользователи видят только свои персональные темы

### Если формат некорректный
- Система пытается обработать доступные блоки
- Игнорирует некорректно отформатированные блоки
- Возвращает частичный список тем

### Если тем меньше 6
- Система обрабатывает все доступные темы
- Не генерирует пустые темы

## Обновление тем

### Процедура обновления
1. Отредактируйте файл `default_topics.txt`
2. Сохраните изменения
3. Изменения применяются немедленно без перезапуска сервера

### Проверка корректности
1. Убедитесь, что формат соответствует требованиям
2. Проверьте количество тем (должно быть 6)
3. Проверьте, что все тексты на английском языке
4. Убедитесь в корректности разделителей

## Примеры тем

### Хорошие примеры
```
Daily Communication
Introductions, small talk, hobbies — an easy start for any level.

Travel and Trips
Airport, hotel, cafe — confidently solve issues on the road.
```

### Плохие примеры
```
// Слишком длинное название
Advanced Professional Communication in International Business Environment
// Слишком короткое описание
Business.
// Отсутствие разделителей
Daily Communication
Introductions, small talk, hobbies — an easy start for any level.
Study and Campus
Seminars, deadlines, communication with teachers — typical student situations.
```

## Важные замечания

1. **Все тексты должны быть на английском языке** - система не поддерживает автоматический перевод
2. **Строго следуйте формату** - неправильное форматирование может привести к ошибкам
3. **Проверяйте количество тем** - должно быть ровно 6
4. **Используйте простой язык** - темы должны быть понятны пользователям любого уровня
5. **Избегайте специальных символов** - используйте только стандартные символы ASCII
6. **Проверяйте пробелы** - лишние пробелы могут нарушить парсинг
