"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[180],{82180:(e,t,r)=>{r.r(t),r.d(t,{PaymentCheckProvider:()=>d});var s=r(95155),n=r(12115),u=r(99776),a=r(22663),i=r(32280),c=r(98959),o=r(68513),l=r(41174);let d=e=>{let{children:t}=e,r=(0,u.jE)(),d=(0,n.useRef)(!1),y=c.O.get(),f=(null==y?void 0:y.paymentId)||null,{data:p,isSuccess:h}=(0,i.QD)(f,!!f);return(0,n.useEffect)(()=>{if(!h||!p||d.current)return;let e=p.status;"success"===e?(a.Ay.success("Оплата прошла успешно! \uD83C\uDF89",{duration:5e3,position:"top-center"}),r.invalidateQueries({queryKey:[o.a$.checkAuth]}),r.invalidateQueries({queryKey:[l.U.getTariffs]}),c.O.remove(),d.current=!0):"closed"===e?(a.Ay.error("Не удалось провести оплату. Попробуйте снова.",{duration:5e3,position:"top-center"}),c.O.remove(),d.current=!0):"await"===e&&console.log("Payment status: awaiting...")},[h,p,r]),(0,s.jsx)(s.Fragment,{children:t})}}}]);