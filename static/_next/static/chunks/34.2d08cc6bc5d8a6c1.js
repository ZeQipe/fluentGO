"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[34],{9034:(e,a,n)=>{n.r(a),n.d(a,{LanguageProvider:()=>f});var t=n(95155),o=n(12115),r=n(55863),c=n(99776),l=n(80549),u=n(25333),g=n(1685),s=n(14828),i=n(41174);let d=()=>{var e;let a=null==(e=document.cookie.split("; ").find(e=>e.startsWith("googtrans=")))?void 0:e.split("=")[1];return a&&a.split("/")[2]||"en"},f=e=>{let{children:a}=e,{data:n,isSuccess:f}=(0,r.C)(),m=(0,c.jE)(),h=(()=>{let e=(0,c.jE)();return(0,l.n)({mutationFn:async e=>await u.FH.put(g.J.language,{json:e}).json(),onSuccess:a=>{e.setQueryData([s.h.getLanguage],a),console.log("Language synced with server: ".concat(a.language))},onError:e=>{console.error("Ошибка при обновлении языка:",e)}})})(),v=(0,o.useRef)(null);return(0,o.useEffect)(()=>{f&&(null==n?void 0:n.language)&&(d()!==n.language&&((e=>{if(!window)return;let a="/".concat("en","/").concat(e);document.cookie="googtrans=".concat(a,"; path=/; max-age=31536000; SameSite=lax");let n=window.location.hostname;document.cookie="googtrans=".concat(a,"; path=/; max-age=31536000; domain=").concat(n,"; SameSite=lax")})(n.language),console.log("Language cookie set from server: ".concat(n.language))),v.current=n.language)},[f,n]),(0,o.useEffect)(()=>{let e=setInterval(()=>{let e=d();console.log("Current language:",e,"Previous:",v.current),null!==v.current&&e!==v.current&&(console.log("Language changed by user: ".concat(v.current," -> ").concat(e)),h.mutate({language:e},{onSuccess:()=>{console.log("Invalidating tariffs cache"),m.invalidateQueries({queryKey:[i.U.getTariffs]})}}),v.current=e)},300);return()=>clearInterval(e)},[h,m]),(0,t.jsx)(t.Fragment,{children:a})}}}]);