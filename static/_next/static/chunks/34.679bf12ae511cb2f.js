"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[34],{9034:(e,t,a)=>{a.r(t),a.d(t,{LanguageProvider:()=>p});var n=a(95155),r=a(12115),u=a(55863),c=a(99776),l=a(80549),o=a(25333),s=a(1685),g=a(14828),i=a(41174),f=a(20063),d=a(52321);let m=()=>{var e;let t=null==(e=document.cookie.split("; ").find(e=>e.startsWith("googtrans=")))?void 0:e.split("=")[1];return t&&t.split("/")[2]||"en"},h=e=>{if(!window)return;let t="/".concat("en","/").concat(e);document.cookie="googtrans=".concat(t,"; path=/; max-age=31536000; SameSite=lax");let a=window.location.hostname;document.cookie="googtrans=".concat(t,"; path=/; max-age=31536000; domain=").concat(a,"; SameSite=lax")},p=e=>{let{children:t}=e,{data:a,isSuccess:p}=(0,u.C)(),v=(0,c.jE)(),k=(0,f.usePathname)(),E=(0,f.useRouter)(),S=(0,f.useSearchParams)(),w=(()=>{let e=(0,c.jE)();return(0,l.n)({mutationFn:async e=>await o.FH.put(s.J.language,{json:e}).json(),onSuccess:t=>{e.setQueryData([g.h.getLanguage],t)},onError:e=>{console.error("Ошибка при обновлении языка:",e)}})})(),j=(0,r.useRef)(null),x=(0,r.useRef)(!1),y=(0,r.useCallback)(function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=S.get("locale");if(!t&&a===e)return;let n=S.toString(),r=n?"".concat(k,"?").concat(n):k,u=(0,d.c)(r,e);E.replace(u,{scroll:!1})},[k,S,E]);return(0,r.useEffect)(()=>{if(!x.current){let e=S.get("locale");e?m()!==e&&h(e):y(m(),!0),j.current=e||m(),x.current=!0}},[k,S,E,y]),(0,r.useEffect)(()=>{if(p&&(null==a?void 0:a.language)&&x.current){let e=m(),t=(0,d.o)(S);e!==a.language&&h(a.language),t!==a.language&&y(a.language,!0),j.current=a.language}},[p,a,k,S,E,y]),(0,r.useEffect)(()=>{if(!x.current)return;let e=setInterval(()=>{let e=m();null!==j.current&&e!==j.current&&(j.current=e,w.mutate({language:e},{onSuccess:()=>{v.invalidateQueries({queryKey:[i.U.getTariffs]})}}),setTimeout(()=>{y(e,!0)},500))},300);return()=>clearInterval(e)},[w,v,E,k,S,y]),(0,n.jsx)(n.Fragment,{children:t})}}}]);